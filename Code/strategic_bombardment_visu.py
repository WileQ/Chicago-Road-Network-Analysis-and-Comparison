import networkx as nx
import pandas as pd
import matplotlib.pyplot as plt

nodes_to_del = [12716, 2155, 2346, 4694, 2124, 2209, 2111, 2300, 2316, 2451, 2167, 12142, 10865, 9969, 9968, 2168, 12743, 12203, 7109, 7509, 4485, 12153, 12250, 12400, 2103, 6470, 6469, 12744, 12739, 11038, 8067, 8063, 10677, 2104, 11692, 2243, 10646, 12349, 2453, 8229, 8225, 2207, 5005, 4359, 12825, 5508, 2113, 8890, 12328, 4997, 12405, 12354, 12305, 11305, 4580, 7076, 12830, 10670, 11975, 4623, 11748, 12760, 4624, 9990, 9994, 10641, 10085, 11584, 11700, 10911, 2893, 10888, 6549, 10622, 5160, 7455, 7456, 7066, 7072, 4636, 11231, 4650, 4352, 4349, 4360, 3675, 9820, 11744, 10372, 6604, 4602, 11948, 11957, 2472, 5518, 7071, 8333, 2012, 7020, 2010, 7889, 5528, 9381, 7064, 7888, 10358, 7512, 8131, 7189, 4606, 2031, 4589, 7458, 4612, 4578, 7438, 7295, 7514, 7469, 10363, 4334, 7423, 7022, 10974, 12037, 7625, 3973, 2688, 10960, 12245, 10547, 10158, 8507, 2481, 9087, 4487, 11187, 2219, 2218, 10078, 11016, 12251, 12314, 9089, 12055, 9059, 3887, 8481, 10843, 12135, 10792, 12315, 10794, 9019, 6333, 12375, 10967, 12091, 12109, 12089, 11166, 7292, 12419, 9246, 9226, 2189, 2190, 12601, 6339, 9007, 12528, 11177, 11178, 11790, 12237, 12090, 12040, 8866, 12052, 12050, 10515, 12056, 10509, 9131, 3984, 9140, 9142, 8451, 8900, 6405, 11104, 9803, 11787, 2721, 3857, 11228, 4639, 2831, 7956]
#nodes_to_del = [11213, 1798, 11333, 2672, 11041, 6401, 6025, 11850, 7053, 11358, 2854, 8643, 6638, 7396, 11746, 968, 12901, 9812, 12669, 11378, 9578, 11675, 8395, 10473, 1741, 8659, 12253, 8771, 3360, 7717, 1847, 12881, 3982, 4063, 584, 11452, 3840, 3813, 9710, 4590, 5049, 12805, 11220, 7714, 6718, 8962, 7051, 6095, 3172, 364, 2488, 5810, 6170, 9820, 3630, 3940, 12466, 7988, 3955, 6692, 6721, 8977, 8411, 10909, 8606, 12680, 7788, 7346, 3096, 7066, 1889, 9210, 460, 1450, 10213, 2558, 5979, 8511, 2823, 10894, 9672, 11865, 10774, 7964, 2562, 1876, 11397, 6812, 3072, 2552, 6661, 6272, 10488, 11931, 5558, 11486, 7386, 10225, 3696, 1333, 1672, 641, 8031, 6657, 815, 11131, 7813, 4866, 5155, 3577, 8865, 7869, 9836, 8598, 1342, 1979, 11218, 4405, 9227, 3819, 11937, 9074, 9228, 7293, 3738, 11966, 5082, 1305, 7125, 11091, 9705, 8825, 1335, 1980, 5681, 3811, 8072, 1789, 9112, 8959, 2250, 8110, 228, 1862, 500, 7117, 7000, 11438, 9021, 10676, 4655, 4679, 3563, 12850, 7304, 89, 12141, 12603, 6969, 8420, 8797, 4763, 7816, 1133, 10351, 26, 10872, 1139, 1904, 6404, 1284, 12131, 8566, 9912, 8429, 6712, 12049, 6503, 1430, 10266, 6434, 5117, 8988, 866, 3862, 11123, 9795, 5280, 38, 6831, 6343, 12364, 7343, 6512, 1836, 9937, 2618, 11413, 4756, 8540, 6564, 9381, 988, 7627, 2517, 4975, 8656, 9098, 12824, 2770, 11739, 4612, 4371, 6730, 605, 4424, 6261, 1928, 7986, 625, 3849, 8006, 11518, 1784, 644, 10436, 5104, 12927, 642, 4559, 12477, 5484, 2587, 2604, 4507, 6530, 9874, 3112, 3828, 3407, 3102, 4083, 2998, 1414, 9864, 3334, 1194, 1081, 3111, 9924, 912, 3609, 8088, 1126, 9513, 3530, 10949, 7009, 8885, 5780, 2528, 10867, 3125, 6900, 1651, 12810, 317, 5815, 4091, 11508, 3292, 5178, 8578, 1307, 3371, 674, 9126, 691, 12482, 5311, 12946, 5795, 12343, 5742, 6936, 4207, 6536, 11734, 44, 12370, 7155, 405, 9599, 4576, 10644, 5320, 4503, 1956, 8654, 2674, 11303, 3415, 5531, 3808, 9845, 4458, 8824, 11679, 6396, 6904, 11535, 6665, 5074, 12959, 10406, 990, 1452, 11705, 12956, 8848, 8920, 844, 5341, 5659, 10495, 1641, 1207, 1058, 8800, 3323, 8612, 7102, 4873, 9859, 5726, 6612, 10566, 8194, 6467, 10544, 7207, 7135, 2576, 3665, 12747, 2431, 2746, 1253, 3142, 4903, 4483, 2336, 2267, 12843, 3551, 4204, 2557, 4663, 7971, 2291, 8924, 1185, 12758, 8794, 2210, 1553, 1730, 7043, 614, 7264, 9300, 4604, 5728, 5443, 519, 12534, 11460, 1933, 8347, 4767, 6895, 6953, 10332, 9983, 9268, 5740, 9343, 6629, 620, 10286, 10939, 9055, 1367, 5597, 2691, 3663, 6213, 2158, 1279, 6115, 2629, 11805, 2637, 7633, 78, 5292, 5717, 1896, 12884, 12947, 7228, 10567, 7407, 5670, 10629, 8456, 6210, 7871, 6762, 7101, 8914, 7251, 5212, 12112, 4379, 10424, 9816, 5855, 10478, 1480, 11616, 10353, 1141, 11013, 1995, 9743, 3129, 1572, 3642, 4075, 3347, 1686, 7209, 9529, 3886, 12041, 7235, 7445, 923, 4567, 7008, 5819, 12577, 12868, 2748, 170, 10695, 12145, 7171, 6952, 281, 9194, 11294, 7041, 3947, 6004, 12818, 2385, 9991, 3341, 11530, 12209, 12689, 7025, 3796, 4363, 3389, 5837, 3483, 2193, 4073, 7542, 4619, 10675, 3512, 3227, 10035, 10645, 1831, 4716, 7905, 12338, 9263, 4008, 4894, 1066, 918, 4472, 6662, 9145, 5953, 4751, 7688, 4322, 6913, 7992, 10910, 3874, 3445, 11835, 5476, 4015, 6976, 8652, 6537, 12914, 3482, 4850, 4228, 3182, 3758, 2198, 6687, 1837, 9900, 9071, 508, 10856, 140, 9754, 5649, 10062, 10906, 10861, 12792, 12788, 12427, 7132, 2537, 12177, 12388, 8897, 2665, 1016, 429, 9162, 10120, 7364, 6930, 6263, 10814, 9831, 8933, 6970, 8591, 8833, 93, 11134, 2875, 12078, 2680, 9424, 7286, 5630, 8537, 216, 4348, 227, 1815, 4913, 8875, 10139, 10689, 4062, 4515, 5803, 9110, 3509, 3357, 6334, 4020, 4690, 1927, 3074, 5792, 11040, 6688, 4378, 12471, 1166, 416, 4731, 11998, 11154, 12817, 6881, 9277, 10022, 10593, 9058, 5137, 788, 1088, 7978, 9275, 6840, 5942, 11979, 10841, 6101, 3986, 12017, 6685, 2890, 11974, 8847, 9475, 10654, 8731, 5348, 10775, 661, 8755, 9189, 7486, 4223, 2773, 6438, 6380, 6901, 11884, 4337, 4467, 779, 8597, 5854, 4785, 5363, 9990, 6683, 11084, 4227, 5939, 3621, 4425, 2827, 8337, 2923, 10839, 12893, 8260, 2695, 3139, 7536, 8240, 8646, 4962, 2871, 2123, 11436, 3000, 7123, 6078, 7994, 8080, 11752, 8900, 8868, 9878, 9401, 981, 482, 1285, 9500, 11566, 2355, 3014, 12192, 10092, 9402, 11874, 5140, 5461, 2690, 1674, 4828, 2768, 3805, 6235, 6980, 5530, 12201, 2487, 2119, 10466, 5213, 7400, 12859, 6311, 12484, 7083, 1032, 8002, 9106, 9957, 9698, 10820, 11915, 5944, 1325, 1136, 7256, 6797, 175, 4510, 3143, 5634, 1727, 2475, 5241, 8972, 3972, 9519, 1531, 5093, 2612, 7044, 11589, 8754, 4575, 5052, 8426, 9423, 12054, 2441, 7174, 8859, 6851, 3938, 4312, 5450, 10712, 6104, 1380, 5543, 252, 4522, 6741, 8801, 6619, 10902, 9137, 8127, 2280, 7146, 6526, 7172, 2462, 6782, 8385, 7421, 9520, 11019, 11996, 7067, 6923, 1132, 833, 6841, 1523, 6133, 12554, 4247, 11596, 67, 7391, 6867, 4270, 10571, 2493, 10515, 7591, 4979, 12677, 461, 4460, 214, 6714, 10951, 7712, 1917, 6155, 11731, 6752, 2277, 2966, 8904, 3787, 1955, 10101, 7592, 5039, 439, 9960, 1290, 11195, 6627, 484, 325, 3802, 12730, 11191, 717, 8100, 2578, 2636, 8422, 3107, 5613, 12446, 1926, 2458, 3027, 512, 1332, 11575, 3140, 7372, 4947, 11050, 1973, 8361, 2907, 7719, 8147, 11244, 612, 9528, 12254, 7099, 4493, 3557, 491, 2648, 2683, 4588, 1747, 4533, 2797, 12003, 1114, 10966, 6889, 12144, 2633, 7533, 10445, 8308, 5760, 6352, 10768, 10230, 8991, 12195, 8393, 2544, 8570, 12905, 3757, 591, 996, 11424, 11646, 4366, 3373, 2261, 7974, 4859, 2378, 11825, 5078, 12750, 8017, 6028, 1821, 11277, 859, 11608, 8841, 5187, 3697, 4847, 6636, 1766, 11168, 12121, 6067, 12565, 12704, 9590, 2301, 6031, 6312, 2971, 1552, 11448, 3561, 2289, 11525, 720, 4883, 1262, 10970, 4792, 11760, 3342, 12774, 9660, 8313, 9972, 10093, 141, 1130, 2724, 5274, 10532, 6072, 8617, 2480, 479, 450, 12596, 12478, 5142, 5943, 11973, 7561, 9213, 6968, 2709, 1203, 2856, 5771, 8131, 5548, 210, 11447, 9172, 6036, 12293, 1934, 6390, 8134, 1242, 3103, 1577, 5100, 5685, 10063, 202, 10517, 6559, 12083, 4693, 2800, 8184, 5816, 11269, 7321, 11239, 1183, 2428, 3375, 6727, 1721, 3354, 8170, 9682, 4406, 5818, 5590, 6050, 8090, 1624, 3536, 12325, 7985, 1314, 6815, 10784, 7700, 318, 3872, 863, 10127, 5697, 7240, 9582, 9646, 3061, 6157, 12103, 12931, 5215, 8899, 8772, 5814, 12648, 351, 1823, 259, 7652, 3824, 660, 6419, 5502, 3031, 7506, 10817, 11104, 6356, 7384, 6951, 213, 997, 8133, 1144, 11072, 6306, 9880, 12958, 5201, 1628, 12814, 3920, 8666, 4046, 1957, 9625, 7909, 6254, 2685, 6545, 11968, 7342, 3993, 7433, 7227, 11536, 511, 8901, 4448, 1079, 4269, 5862, 9913, 4279, 7944, 4343, 2257, 10895, 6763, 2304, 124, 5306, 11368, 631, 10201, 1922, 8244, 8037, 7151, 6042, 5122, 10978, 338, 9057, 5798, 5529, 8475, 9400, 11939, 12523, 5540, 10326, 1085, 6522, 10641, 2464, 12434, 10840, 9533, 2000, 10821, 1021, 9013, 4808, 4277, 8042, 8057, 11503, 12076, 3801, 369, 6573, 12761, 600, 6234, 12592, 7838, 11690, 12421, 2446, 7587, 2571, 9473, 5270, 721, 11063, 6389, 5812, 7632, 1275, 676, 4744, 9658, 7244, 8257, 8820, 12661, 9940, 6725, 6909, 6738, 7389, 8238, 12976, 5645, 3110, 1673, 3079, 9600, 1488, 11047, 10638, 2270, 8123, 9791, 10527, 2259, 12082, 6850, 10696, 4553, 2341, 10014, 10038, 12514, 3364, 2262, 11532, 8590, 12631, 3951, 8711, 2073, 9958, 6325, 7284, 4440, 6960, 54, 8409, 5028, 12170, 5328, 1792, 12033, 3776, 3708, 7245, 2723, 3891, 1226, 3352, 4648, 10235, 5229, 9844, 7134, 11360, 7319, 12441, 11965, 2214, 7366, 3244, 6872, 8616, 8670, 5275, 1731, 5948, 6427, 8649, 9861, 6842, 8888, 4318, 8613, 6884, 190, 8335, 2460, 11037, 2792, 11247, 9429, 3766, 10628, 8267, 9231, 4929, 6177, 5189, 464, 2978, 6934, 10848, 12350, 1992, 7887, 10754, 1750, 12067, 5496, 2577, 8187, 1198, 917, 9561, 4825, 10316, 7510, 5235, 6159, 12247, 6300, 3258, 9882, 5435, 5723, 10943, 2467, 4145, 9047, 2727, 7085, 7191, 8190, 6288, 11715, 2079, 6353, 7193, 4768, 4097, 7663, 9063, 1478, 12186, 7329, 8809, 7440, 8065, 208, 12566, 4304, 10626, 548, 7729, 7444, 2448, 11660, 5566, 12498, 567, 1229, 2706, 4300, 6160, 2810, 7004, 10100, 5266, 12461, 12312, 11086, 3114, 7599, 12734, 8399, 1086, 3248, 7702, 11012, 2054, 8854, 876, 5977, 11559, 6775, 9749, 8506, 1579, 10045, 5642, 8941, 4159, 1777, 1594, 3365, 8348, 8301, 6843, 11634, 7610, 12165, 4116, 11016, 4420, 11260, 9176, 8021, 6459, 5214, 8218, 5959, 11680, 861, 11747, 10870, 5992, 4396, 9696, 7553, 8777, 5315, 10419, 4362, 6974, 10956, 11669, 1864, 2051, 2426, 4621, 11127, 11723, 5800, 902, 5669, 9193, 2417, 6397, 3410, 419, 3575, 11240, 2865, 3461, 11818, 9938, 1575, 6979, 5925, 11582, 3939, 8650, 7795, 8288, 1724, 10846, 10812, 2044, 11695, 880, 959, 12918, 3263, 5581, 11350, 4602, 5506, 12394, 4711, 4271, 1266, 6993, 4267, 10795, 11591, 6052, 8919, 7955, 6794, 671, 4197, 3025, 4190, 4359, 6719, 7291, 766, 5473, 722, 5429, 10899, 8808, 11572, 4635, 5754, 11541, 9061, 6759, 8338, 628, 4905, 73, 4288, 11022, 11512, 12887, 2764, 9922, 2306, 11009, 5387, 12075, 12057, 9095, 4098, 5286, 4161, 7648, 10472, 10169, 12199, 10172, 5501, 10390, 8491, 10758, 2245, 1003, 1829, 2972, 4955, 2954, 12399, 6333, 3709, 2204, 5449, 9246, 3181, 3231, 2313, 435, 3379, 5849, 3202, 6425, 11026, 5744, 9283, 352, 6508, 10122, 4239, 677, 7485, 6927, 9750, 8596, 11316, 3289, 3855, 1075, 9108, 6509, 11514, 2661, 11028, 9243, 8067, 8289, 498, 7158, 11230, 2832, 10382, 8486, 1737, 716, 10411, 6253, 8051, 2186, 5465, 7929, 4196, 11282, 545, 1204, 2319, 5865, 12806, 4944, 6722, 903, 9559, 2696, 12340, 176, 2008, 3688, 5321, 527, 4195, 5511, 3163, 12515, 664, 9966, 7320, 3146, 8692, 11031, 4456, 5523, 3644, 4584, 12965, 2043, 7573, 122, 10481, 4022, 5958, 7352, 6080, 5293, 5106, 1559, 9321, 3070, 3831, 11161, 4398, 3398, 2225, 11600, 11110, 3119, 3780, 5677, 11468, 8887, 5762, 6468, 7601, 7060, 4498, 9309, 7250, 6365, 2425, 9887, 3034, 12897, 5277, 12902, 3515, 7597, 10678, 10069, 6485, 10486, 6076, 10463, 12160, 12695, 4562, 9330, 1123, 7746, 2948, 4164, 4706, 11755, 12703, 12101, 4438, 5619, 6480, 86, 11811, 8132, 10837, 6140, 7770, 8786, 421, 7522, 3017, 10656, 10719, 12756, 7565, 5338, 8304, 4181, 57, 7768, 5194, 5261, 3992, 3044, 1283, 9897, 3285, 8263, 7013, 9356, 6708, 862, 1634, 1609, 8164, 9676, 8757, 11927, 12929, 1459, 12782, 11544, 5916, 2585, 1040, 5186, 8374, 5570, 3368, 2632, 10427, 10962, 1963, 881, 9379, 5763, 11352, 10885, 6767, 8923, 11164, 10847, 10096, 2272, 1669, 7843, 594, 221, 12095, 11588, 9346, 11007, 7142, 2377, 6912, 3799, 2850, 12295, 10887, 12555, 864, 4361, 8932, 10365, 6131, 728, 8674, 9396, 2388, 11721, 6893, 782, 8073, 6134, 7276, 901, 3839, 3329, 7999, 2315, 12142, 10491, 5961, 9982, 185, 7220, 5908, 12701, 8372, 6257, 8415, 5983, 2498, 7487, 7225, 7803, 267, 6416, 5699, 7743, 11256, 1619, 7446, 3581, 8062, 8999, 11887, 5425, 6283, 3970, 6230, 9064, 12232, 3030, 11686, 12679, 215, 3311, 3490, 3495, 12335, 4189, 8774, 1222, 83, 4055, 51, 11375, 1397, 2657, 4315, 5981, 2726, 5035, 7868, 10245, 486, 3989, 7735, 7728, 4692, 7819, 11061, 8512, 558, 113, 7212, 12653, 7361, 3846, 131, 10713, 6393, 3628, 8952, 9764, 7065, 5296, 2765, 111, 5787, 12420, 12400, 11273, 8016, 3793, 3964, 4179, 12445, 7073, 3852, 2947, 2335, 3417, 4245, 7865, 3053, 245, 10896, 7026, 3403, 7195, 966, 2005, 6058, 2979, 4853, 2484, 2984, 2208, 10018, 7432, 234, 9147, 9892, 11445, 6535, 12543, 11859, 6150, 6142, 8819, 913, 3116, 10521, 5431, 3976, 1872, 5167, 7534, 1648, 6202, 2882, 10450, 5335, 7152, 11822, 6444, 6216, 12804, 6502, 9713, 12923, 6337, 5120, 8116, 422, 8759, 2320, 1445, 626, 11783, 870, 6201, 3583, 2205, 12682, 3121, 4811, 4546, 3167, 8008, 12505, 5843, 1655, 6149, 2383, 1987, 2795, 1827, 1645, 3690, 6985, 12277, 330, 9159, 11418, 10897, 12552, 5611, 11900, 6578, 11454, 8007, 6518, 3451, 684, 2171, 12736, 10156, 1613, 9279, 6813, 1946, 4598, 1809, 7547, 7530, 10254, 12084, 9326, 7834, 3021, 12530, 11404, 10953, 7126, 6307, 2434, 6946, 6637, 2110, 1157, 9382, 5614, 5209, 10157, 11776, 4057, 7232, 10208, 4422, 12052, 11994, 12263, 1404, 8721, 5251, 3546, 1330, 10385, 6606, 11836, 8960, 10132, 2950, 2317, 7989, 3035, 3177, 528, 6206, 1439, 12156, 2103, 9375, 9577, 7799, 12128, 9470, 4868, 11764, 6987, 9026, 5706, 12408, 7569, 11781, 8066, 3162, 5663, 5223, 7006, 11102, 3912, 10237, 9766, 9212, 10891, 11208, 11972, 8522, 193, 613, 8795, 7248, 3996, 4047, 729, 11770, 2733, 6582, 12707, 2763, 6119, 9967, 4504, 4599, 1838, 6151, 9842, 2992, 9387, 10198, 8144, 6350, 6271, 10343, 5072, 5114, 1174, 6668, 4869, 459, 10105, 6280, 10271, 1599, 5605, 11563, 3015, 2820, 2774, 3579, 12281, 3475, 7840, 8155, 2656, 11482, 1415, 2535, 1393, 6961, 2897, 12789, 3387, 8699, 12529, 11801, 9818, 6349]

print(len(nodes_to_del))

df = pd.read_csv('../Networks/chicago_network_edges.csv')
B = nx.from_pandas_edgelist(df, source='source', target='target', create_using=nx.DiGraph())
length1 = len(B.nodes)

threshold = 0.5 * length1
largest_cc_size = length1
visu_data = []
B = B.to_undirected()
itera = 0


while len(nodes_to_del) > itera:
    largest_cc = max(nx.connected_components(B), key=len)
    largest_cc_size = len(largest_cc)
    B.remove_node(nodes_to_del[itera])

    visu_data.append(largest_cc_size / 12979)
    itera += 1
print(largest_cc_size)


index = range(len(visu_data))
print(visu_data)

plt.plot(index, visu_data, marker='o', linestyle='-', color='b', linewidth=2, markersize=0.5)
plt.axhline(y=0.5, color='r', linestyle='--', label="y = 0.5")

plt.title("Simulation of a strategic bombardment")
plt.xlabel("Number of attacks")
plt.ylabel("Nodes in the largest component")
plt.savefig('../Visualization/strategic_bombardment_visu.png', dpi=300, bbox_inches='tight')

plt.grid(True)
plt.show()

